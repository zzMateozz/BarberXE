{"version":3,"sources":["../../src/decorator/entity-view/ViewEntity.ts"],"names":[],"mappings":";;AAwBA,gCA0BC;AAlDD,2CAAsD;AAGtD,wDAAoD;AAiBpD;;;GAGG;AACH,SAAgB,UAAU,CACtB,aAA0C,EAC1C,YAAgC;IAEhC,MAAM,OAAO,GACT,CAAC,yBAAW,CAAC,QAAQ,CAAC,aAAa,CAAC;QAChC,CAAC,CAAE,aAAmC;QACtC,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,CAAA;IAC7B,MAAM,IAAI,GACN,OAAO,aAAa,KAAK,QAAQ,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAA;IAEpE,OAAO,UAAU,MAAgB;QAC7B,IAAA,gCAAsB,GAAE,CAAC,MAAM,CAAC,IAAI,CAAC;YACjC,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,IAAI;YACV,UAAU,EAAE,OAAO,CAAC,UAAU;YAC9B,SAAS,EAAE,OAAO,CAAC,SAAS;gBACxB,CAAC,CAAC,IAAI,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC;gBAC5B,CAAC,CAAC,SAAS;YACf,IAAI,EAAE,MAAM;YACZ,QAAQ,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS;YACzD,MAAM,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS;YACnD,WAAW,EAAE,OAAO,CAAC,WAAW,KAAK,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI;YACzD,YAAY,EAAE,CAAC,CAAC,OAAO,CAAC,YAAY;SAClB,CAAC,CAAA;IAC3B,CAAC,CAAA;AACL,CAAC","file":"ViewEntity.js","sourcesContent":["import { getMetadataArgsStorage } from \"../../globals\"\r\nimport { TableMetadataArgs } from \"../../metadata-args/TableMetadataArgs\"\r\nimport { ViewEntityOptions } from \"../options/ViewEntityOptions\"\r\nimport { ObjectUtils } from \"../../util/ObjectUtils\"\r\n\r\n/**\r\n * This decorator is used to mark classes that will be an entity view.\r\n * Database schema will be created for all classes decorated with it, and Repository can be retrieved and used for it.\r\n */\r\nexport function ViewEntity(options?: ViewEntityOptions): ClassDecorator\r\n\r\n/**\r\n * This decorator is used to mark classes that will be an entity view.\r\n * Database schema will be created for all classes decorated with it, and Repository can be retrieved and used for it.\r\n */\r\nexport function ViewEntity(\r\n    name?: string,\r\n    options?: ViewEntityOptions,\r\n): ClassDecorator\r\n\r\n/**\r\n * This decorator is used to mark classes that will be an entity view.\r\n * Database schema will be created for all classes decorated with it, and Repository can be retrieved and used for it.\r\n */\r\nexport function ViewEntity(\r\n    nameOrOptions?: string | ViewEntityOptions,\r\n    maybeOptions?: ViewEntityOptions,\r\n): ClassDecorator {\r\n    const options =\r\n        (ObjectUtils.isObject(nameOrOptions)\r\n            ? (nameOrOptions as ViewEntityOptions)\r\n            : maybeOptions) || {}\r\n    const name =\r\n        typeof nameOrOptions === \"string\" ? nameOrOptions : options.name\r\n\r\n    return function (target: Function) {\r\n        getMetadataArgsStorage().tables.push({\r\n            target: target,\r\n            name: name,\r\n            expression: options.expression,\r\n            dependsOn: options.dependsOn\r\n                ? new Set(options.dependsOn)\r\n                : undefined,\r\n            type: \"view\",\r\n            database: options.database ? options.database : undefined,\r\n            schema: options.schema ? options.schema : undefined,\r\n            synchronize: options.synchronize === false ? false : true,\r\n            materialized: !!options.materialized,\r\n        } as TableMetadataArgs)\r\n    }\r\n}\r\n"],"sourceRoot":"../.."}