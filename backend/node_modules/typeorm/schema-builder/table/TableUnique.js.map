{"version":3,"sources":["../../src/schema-builder/table/TableUnique.ts"],"names":[],"mappings":";;;AAGA;;GAEG;AACH,MAAa,WAAW;IAuBpB,4EAA4E;IAC5E,cAAc;IACd,4EAA4E;IAE5E,YAAY,OAA2B;QA1B9B,mBAAa,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAA;QAWlD;;WAEG;QACH,gBAAW,GAAa,EAAE,CAAA;QAatB,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAA;QACxB,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAA;QACtC,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAA;IACxC,CAAC;IAED,4EAA4E;IAC5E,iBAAiB;IACjB,4EAA4E;IAE5E;;OAEG;IACH,KAAK;QACD,OAAO,IAAI,WAAW,CAAqB;YACvC,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,WAAW,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;YAClC,UAAU,EAAE,IAAI,CAAC,UAAU;SAC9B,CAAC,CAAA;IACN,CAAC;IAED,4EAA4E;IAC5E,iBAAiB;IACjB,4EAA4E;IAE5E;;OAEG;IACH,MAAM,CAAC,MAAM,CAAC,cAA8B;QACxC,OAAO,IAAI,WAAW,CAAqB;YACvC,IAAI,EAAE,cAAc,CAAC,IAAI;YACzB,WAAW,EAAE,cAAc,CAAC,OAAO,CAAC,GAAG,CACnC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,YAAY,CAClC;YACD,UAAU,EAAE,cAAc,CAAC,UAAU;SACxC,CAAC,CAAA;IACN,CAAC;CACJ;AAhED,kCAgEC","file":"TableUnique.js","sourcesContent":["import { TableUniqueOptions } from \"../options/TableUniqueOptions\"\r\nimport { UniqueMetadata } from \"../../metadata/UniqueMetadata\"\r\n\r\n/**\r\n * Database's table unique constraint stored in this class.\r\n */\r\nexport class TableUnique {\r\n    readonly \"@instanceof\" = Symbol.for(\"TableUnique\")\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Public Properties\r\n    // -------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Constraint name.\r\n     */\r\n    name?: string\r\n\r\n    /**\r\n     * Columns that contains this constraint.\r\n     */\r\n    columnNames: string[] = []\r\n\r\n    /**\r\n     * Set this foreign key constraint as \"DEFERRABLE\" e.g. check constraints at start\r\n     * or at the end of a transaction\r\n     */\r\n    deferrable?: string\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Constructor\r\n    // -------------------------------------------------------------------------\r\n\r\n    constructor(options: TableUniqueOptions) {\r\n        this.name = options.name\r\n        this.columnNames = options.columnNames\r\n        this.deferrable = options.deferrable\r\n    }\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Public Methods\r\n    // -------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Creates a new copy of this constraint with exactly same properties.\r\n     */\r\n    clone(): TableUnique {\r\n        return new TableUnique(<TableUniqueOptions>{\r\n            name: this.name,\r\n            columnNames: [...this.columnNames],\r\n            deferrable: this.deferrable,\r\n        })\r\n    }\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Static Methods\r\n    // -------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Creates unique from the unique metadata object.\r\n     */\r\n    static create(uniqueMetadata: UniqueMetadata): TableUnique {\r\n        return new TableUnique(<TableUniqueOptions>{\r\n            name: uniqueMetadata.name,\r\n            columnNames: uniqueMetadata.columns.map(\r\n                (column) => column.databaseName,\r\n            ),\r\n            deferrable: uniqueMetadata.deferrable,\r\n        })\r\n    }\r\n}\r\n"],"sourceRoot":"../.."}