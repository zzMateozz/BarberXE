{"version":3,"sources":["../../src/util/PathUtils.ts"],"names":[],"mappings":";;AAKA,wCAYC;AAMD,wCAGC;AAKD,gCAEC;AAjCD,+CAAoC;AAEpC,MAAM,mBAAmB,GAAG,iBAAiB,CAAA;AAC7C,MAAM,uBAAuB,GAAG,mBAAmB,CAAA;AAEnD,SAAgB,cAAc,CAAC,QAAgB;IAC3C,IAAI,OAAO,CAAC,QAAQ,KAAK,OAAO;QAAE,OAAO,QAAQ,CAAA;IAEjD,IAAI,QAAQ,CAAC,KAAK,CAAC,mBAAmB,CAAC;QACnC,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAA;SACtD,IAAI,QAAQ,CAAC,KAAK,CAAC,uBAAuB,CAAC;QAC5C,QAAQ,GAAG,QAAQ,CAAC,OAAO,CACvB,uBAAuB,EACvB,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE,CACtD,CAAA;IAEL,OAAO,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAA;AACvC,CAAC;AAED;;;GAGG;AACH,SAAgB,cAAc,CAAC,QAAgB;IAC3C,MAAM,IAAI,GAAG,cAAc,CAAC,QAAQ,CAAC,CAAC,WAAW,EAAE,CAAA;IACnD,OAAO,IAAA,kBAAI,EAAC,IAAI,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC,CAAA;AACrC,CAAC;AAED;;GAEG;AACH,SAAgB,UAAU,CAAC,QAAgB;IACvC,OAAO,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAA;AACpD,CAAC","file":"PathUtils.js","sourcesContent":["import { hash } from \"./StringUtils\"\r\n\r\nconst WINDOWS_PATH_REGEXP = /^([a-zA-Z]:.*)$/\r\nconst UNC_WINDOWS_PATH_REGEXP = /^\\\\\\\\(\\.\\\\)?(.*)$/\r\n\r\nexport function toPortablePath(filepath: string): string {\r\n    if (process.platform !== `win32`) return filepath\r\n\r\n    if (filepath.match(WINDOWS_PATH_REGEXP))\r\n        filepath = filepath.replace(WINDOWS_PATH_REGEXP, `/$1`)\r\n    else if (filepath.match(UNC_WINDOWS_PATH_REGEXP))\r\n        filepath = filepath.replace(\r\n            UNC_WINDOWS_PATH_REGEXP,\r\n            (match, p1, p2) => `/unc/${p1 ? `.dot/` : ``}${p2}`,\r\n        )\r\n\r\n    return filepath.replace(/\\\\/g, `/`)\r\n}\r\n\r\n/**\r\n * Create deterministic valid database name (class, database) of fixed length from any filepath. Equivalent paths for windows/posix systems should\r\n * be equivalent to enable portability\r\n */\r\nexport function filepathToName(filepath: string): string {\r\n    const uniq = toPortablePath(filepath).toLowerCase()\r\n    return hash(uniq, { length: 63 })\r\n}\r\n\r\n/**\r\n * Cross platform isAbsolute\r\n */\r\nexport function isAbsolute(filepath: string): boolean {\r\n    return !!filepath.match(/^(?:[a-z]:|[\\\\]|[/])/i)\r\n}\r\n"],"sourceRoot":".."}