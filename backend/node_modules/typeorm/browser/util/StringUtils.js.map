{"version":3,"sources":["../browser/src/util/StringUtils.ts"],"names":[],"mappings":"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","file":"StringUtils.js","sourcesContent":["import shajs from \"sha.js\"\r\n\r\n/**\r\n * Converts string into camelCase.\r\n *\r\n * @see http://stackoverflow.com/questions/2970525/converting-any-string-into-camel-case\r\n */\r\nexport function camelCase(str: string, firstCapital: boolean = false): string {\r\n    if (firstCapital) str = \" \" + str\r\n    return str.replace(/^([A-Z])|[\\s-_](\\w)/g, function (match, p1, p2) {\r\n        if (p2) return p2.toUpperCase()\r\n        return p1.toLowerCase()\r\n    })\r\n}\r\n\r\n/**\r\n * Converts string into snake_case.\r\n *\r\n */\r\nexport function snakeCase(str: string): string {\r\n    return (\r\n        str\r\n            // ABc -> a_bc\r\n            .replace(/([A-Z])([A-Z])([a-z])/g, \"$1_$2$3\")\r\n            // aC -> a_c\r\n            .replace(/([a-z0-9])([A-Z])/g, \"$1_$2\")\r\n            .toLowerCase()\r\n    )\r\n}\r\n\r\n/**\r\n * Converts string into Title Case.\r\n *\r\n * @see http://stackoverflow.com/questions/196972/convert-string-to-title-case-with-javascript\r\n */\r\nexport function titleCase(str: string): string {\r\n    return str.replace(\r\n        /\\w\\S*/g,\r\n        (txt) => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase(),\r\n    )\r\n}\r\n\r\n/**\r\n * Builds abbreviated string from given string;\r\n */\r\nexport function abbreviate(str: string, abbrLettersCount: number = 1): string {\r\n    const words = str\r\n        .replace(/([a-z\\xE0-\\xFF])([A-Z\\xC0\\xDF])/g, \"$1 $2\")\r\n        .split(\" \")\r\n    return words.reduce((res, word) => {\r\n        res += word.substr(0, abbrLettersCount)\r\n        return res\r\n    }, \"\")\r\n}\r\n\r\nexport interface IShortenOptions {\r\n    /** String used to split \"segments\" of the alias/column name */\r\n    separator?: string\r\n    /** Maximum length of any \"segment\" */\r\n    segmentLength?: number\r\n    /** Length of any \"term\" in a \"segment\"; \"OrderItem\" is a segment, \"Order\" and \"Items\" are terms */\r\n    termLength?: number\r\n}\r\n\r\n/**\r\n * Shorten a given `input`. Useful for RDBMS imposing a limit on the\r\n * maximum length of aliases and column names in SQL queries.\r\n *\r\n * @param input String to be shortened.\r\n * @param options Default to `4` for segments length, `2` for terms length, `'__'` as a separator.\r\n *\r\n * @return Shortened `input`.\r\n *\r\n * @example\r\n * // returns: \"UsShCa__orde__mark__dire\"\r\n * shorten('UserShoppingCart__order__market__director')\r\n *\r\n * // returns: \"cat_wit_ver_lon_nam_pos_wit_ver_lon_nam_pos_wit_ver_lon_nam\"\r\n * shorten(\r\n *   'category_with_very_long_name_posts_with_very_long_name_post_with_very_long_name',\r\n *   { separator: '_', segmentLength: 3 }\r\n * )\r\n *\r\n * // equals: UsShCa__orde__mark_market_id\r\n * `${shorten('UserShoppingCart__order__market')}_market_id`\r\n */\r\nexport function shorten(input: string, options: IShortenOptions = {}): string {\r\n    const { segmentLength = 4, separator = \"__\", termLength = 2 } = options\r\n\r\n    const segments = input.split(separator)\r\n    const shortSegments = segments.reduce((acc: string[], val: string) => {\r\n        // split the given segment into many terms based on an eventual camel cased name\r\n        const segmentTerms = val\r\n            .replace(/([a-z\\xE0-\\xFF])([A-Z\\xC0-\\xDF])/g, \"$1 $2\")\r\n            .split(\" \")\r\n        // \"OrderItemList\" becomes \"OrItLi\", while \"company\" becomes \"comp\"\r\n        const length = segmentTerms.length > 1 ? termLength : segmentLength\r\n        const shortSegment = segmentTerms\r\n            .map((term) => term.substr(0, length))\r\n            .join(\"\")\r\n\r\n        acc.push(shortSegment)\r\n        return acc\r\n    }, [])\r\n\r\n    return shortSegments.join(separator)\r\n}\r\n\r\ninterface IHashOptions {\r\n    length?: number\r\n}\r\n\r\n/**\r\n * Returns a hashed input.\r\n *\r\n * @param input String to be hashed.\r\n * @param options.length Optionally, shorten the output to desired length.\r\n */\r\nexport function hash(input: string, options: IHashOptions = {}): string {\r\n    const hashFunction = shajs(\"sha1\")\r\n    hashFunction.update(input, \"utf8\")\r\n    const hashedInput = hashFunction.digest(\"hex\")\r\n    if (options.length) {\r\n        return hashedInput.slice(0, options.length)\r\n    }\r\n    return hashedInput\r\n}\r\n"],"sourceRoot":".."}